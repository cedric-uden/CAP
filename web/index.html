<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Church Audio Podcast</title>
    <link rel="stylesheet" href="bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="mystyles.css">
</head>


<body>


<div class="main-row" id="row1">
    <div class="log-div" id="log-div"></div>
</div>

<script>

    function readFile() {
        let file = "/cap.log";
        let f = new XMLHttpRequest();
        let res = "";
        f.open("GET", file, false);
        f.onreadystatechange = function () {
            if (f.readyState === 4) {
                if (f.status === 200) {
                    res = f.responseText;
                }
            }
        }
        f.send(null);
        return res;
    }

    function return_split_on_lines(text) {
        return text.split("\n");
    }

    function return_split_on_logs(line) {
        return line.split(" - ");
    }

    function put_array_into_string(text_array) {
        let string = "";
        for (let i in text_array) {
            string += text_array[i] + "\n";
        }
        return string;
    }

    function prepare_log_output() {
        let text = readFile();
        let text_array = return_split_on_lines(text);
        let output = put_array_into_string(text_array);
        document.getElementById("log-div").innerHTML = output;
    }

    function update_log_div() {
        prepare_log_output();
    }

    update_log_div();

</script>


</body>
</html>
